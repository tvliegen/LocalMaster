%p#notice= notice

.tek-bar
  .container-fluid
    %p.breadcrumb
      = link_to 'Tekcare', teknion_claims_path
      %span /
      %span.last Claim: #{@claim.header['tekcare_number']}
.claim
  .claim-details
    .container-fluid
      .row
        %h2
          %u
            Claim Title:
            = @claim.header['project_name']
    %legend
      General Claim Information 
      %a{:href => "#", :sect => "General_Info", :id=>"claiminfo"}
        %span.glyphicon.glyphicon-triangle-top
    #General_Info{:name => "General_Info"}
      .container-fluid
        .row
          .col-sm-12.dealer-section
            %legend.dealer-heading Dealer Information
        .row
          .col-sm-1
          .col-sm-2
            %label Dealer Name
          .col-sm-3
            = @claim.customer['dealer_name']
          .col-sm-2
            %label Dealer Number
          .col-sm-3
            = @claim.customer['dealer_code']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label Dealer Contact Name
          .col-sm-3
            = @claim.customer['dealer_contact_name']
          .col-sm-2
            %label Dealer Contact Number
          .col-sm-3
            = @claim.customer['dealer_contact_number']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label Dealer Contact Email
          .col-sm-7
            = @claim.customer['dealer_contact_email']
          .col-sm-1
        .row
          .col-sm-12.dealer-section
            %legend.dealer-heading Original Order Information
        .row
          .col-sm-1
          .col-sm-2
            %label Universal Number
          .col-sm-3
            = @claim.header['original_universal']
          .col-sm-2
            %label PO Number
          .col-sm-3
            = @claim.header['original_po']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label SQ Number
          .col-sm-3
            = @claim.header['original_sq']
          .col-sm-2
            %label SQ Rev Number
          .col-sm-3
            = @claim.header['original_sq_revision']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label End Customer
          .col-sm-3
            = @claim.header['end_customer_name']
          .col-sm-2
            %label Claim Received Dated
          .col-sm-3
            = @claim.header['submission_date']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
          .col-sm-3
          .col-sm-2
            %label Project Name
          .col-sm-3
            =@claim.header['project_name']
          .col-sm-1
        .row
          .col-sm-12.dealer-section
            %legend.dealer-heading Installation Information
        .row
          .col-sm-1
          .col-sm-2
            %label Installation in Progress
          .col-sm-3
            = @claim.header['installation_in_progress']=='false' ? 'No' : 'Yes'
          .col-sm-2
            %label Estimated Completion
          .col-sm-3
            = @claim.header['est_install_complete_date']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label Installation Company
          .col-sm-3
            = @claim.header['installation_company']
          .col-sm-2
            %label Installer Lead
          .col-sm-3
            = @claim.header['installation_lead_contact_name']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label Lead Contact Number
          .col-sm-3
            = @claim.header['installation_lead_contact_phone']
          .col-sm-2
            %label Lead Contact E-mail
          .col-sm-3
            = @claim.header['installation_lead_contact_email']
          .col-sm-1
        .row
          .col-sm-12.dealer-section
            %legend.dealer-heading Replacement Order Information
        .row
          .col-sm-1
          .col-sm-2
            %label Ship To Name
          .col-sm-8
            = @claim.ship_replacement_to['shipto_name']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label Address
          .col-sm-3
            = @claim.ship_replacement_to['address1']
          .col-sm-2
            %label City
          .col-sm-3
            = @claim.ship_replacement_to['city']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label State/Province
          .col-sm-3
            = @claim.ship_replacement_to['state_prov']
          .col-sm-2
            %label Postal/Zip Code
          .col-sm-3
            = @claim.ship_replacement_to['postal_zip']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label Call Before Name
          .col-sm-3
            = @claim.ship_replacement_to['cb_name']
          .col-sm-2
            %label Call Before Number
          .col-sm-3
            = @claim.ship_replacement_to['cb_number']
          .col-sm-1
        .row
          .col-sm-1
          .col-sm-2
            %label After Hours Contact Name
          .col-sm-3
            = @claim.ship_replacement_to['ah_name']
          .col-sm-2
            %label After Hours Contact Number
          .col-sm-3
            = @claim.ship_replacement_to['ah_number']
          .col-sm-1
    .container-fluid
      .row
        .col-md-12.dealer-section
    %legend
      Issues    
    #IssueInfo{:name => "Issue_Info"}
      .row
        .col-md-12
          .table-responsive
            %table.table.table-striped.table-hover
              %thead
                %tr
                  %th
                    Issue Number
                  %th
                    Shipment Number
                  %th
                    Item Code
                  %th
                    CR Number
                  %th
                    Problem Description
                  %th
                    Line Notes
                  %th
                    Tags
                  %th
                    Issue Status
                  %th
                    Action
              %tbody.rowlink{"data-link" => "row"}
                - @claim.claim_issues.each do |claim_issue|
                  %tr
                    %td
                      = link_to claim_issue.issue_id, teknion_claim_issue_path(claim_issue.issue_id, claim_id: @claim.header['tekcare_number'])
                    %td
                      = claim_issue.original_shipment
                    %td
                      = claim_issue.item_code
                    %td
                      = claim_issue.original_cr_number
                    %td
                      = claim_issue.problem_description
                    %td
                      = claim_issue.original_line_notes
                    %td
                      = claim_issue.original_line_tags
                    %td
                      = claim_issue.issue_status_desc
                    %td
                      %a{:href => "#",:id=>"request_close_#{claim_issue.issue_id}", :class => ['glyphicon','glyphicon-folder-close'], :title => 'Request Close'}
                    %div.jqmWindow.closeReqWindow{id: "request_close_#{claim_issue.issue_id}_modal"}
                    :javascript
                      $('#request_close_#{claim_issue.issue_id}_modal').jqm({
                      ajax: "/claim_issues/#{claim_issue.issue_id}/closereq/new?claim_id=#{claim_issue.issue_id}&incident_id=#{@claim.header['tekcare_number']}",
                      trigger: '#request_close_#{claim_issue.issue_id}',
                      modal: true
                      });
                      
:javascript

  function hide_element(obj_name) {

  var tbl=$('#'+obj_name);
  
  
  if ($('#'+obj_name).css('display')=='block')
  {
    $('#'+obj_name).hide();
    }
    else {
  $('#'+obj_name).show();
  }
  }

  $('#claiminfo').click(function (e){
        e.preventDefault();
      
        hide_element($(this).attr('sect'));
        });
 